import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Programare extends JFrame{
	private JButton[] b;
	private AscultatorC a;	
	
	public Programare(){
	 super ("Cabinet Stomatologic");
	  JPanel p=new JPanel();	
	  p.setLayout(new GridLayout(3,2,10,10));
	  p.setBackground(Color.lightGray);	
	  String[] s=new String[]{"Pacient nou", "Date despre pacient", "Cauta un pacient", "Elimina un pacient"};
	  a=new AscultatorC();	
	 b=new JButton[4];	
	  for (int i=0; i<b.length; i++){
		b[i]=new JButton(s[i]);
		b[i].addActionListener(a);
		p.add(b[i]);
 	   }
	add(p);	
 setSize(375, 175);
 setLocation(300,300);	
 setVisible(true); 	
 addWindowListener(new WindowAdapter(){
   public void windowClosing(WindowEvent e){
   	ColectiePacienti.getInstanta().salveaza();
   	System.exit(0);}
});	
	}
	
	private class AscultatorC implements ActionListener{
		private JFrame f;
		
	 public void actionPerformed(ActionEvent e){
	 
	  if(e.getSource()==b[0]){
	      f=new PacientNouFrame();
	  	f.pack();
	  	f.setVisible(true);
	  	  
	  }
	 else if(e.getSource()==b[1]){
	   f=new PacientiFrame();
         f.setVisible(true);
	 }
	 	
	 else if(e.getSource()==b[2]){
    String info=JOptionPane.showInputDialog("Introduceti numarul biletului unui pacient", JOptionPane.OK_CANCEL_OPTION);
    if(info!=null){
	 	Pacient p=ColectiePacienti.getInstanta().cautaPacient(Integer.parseInt(info));
	 	if (p!=null) {
                           f.setVisible(true);
	 	 }
	 	else JOptionPane.showMessageDialog(Programare.this, "Acest pacient nu participa la programare", "Error", JOptionPane.ERROR_MESSAGE);
	 	}	
       }
	 else{ 
	   f=new EliminarePacientFrame();
         f.setVisible(true);
	  	  
	  }	
	  	
	 }	
 }


}
